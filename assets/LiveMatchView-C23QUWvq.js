import{d as R,c as y,a as n,l,f as x,b as t,t as s,B as p,F as w,g as k,p as d,o as a,_ as N,i as D,j as C,A as V,x as A,w as E,T as F,e as L}from"./index-CspIgzUJ.js";import{u as S}from"./player-B7MPWQ5D.js";import{u as O}from"./settings-B0d6bgWw.js";const j={key:0,class:"live-match-card glass rounded-lg p-4"},I={class:"text-center mb-3"},P={class:"flex items-center justify-center gap-3 mb-1"},K={class:"text-3xl font-bold text-white"},W={class:"text-primary font-bold text-lg flex items-center justify-center gap-2"},B={key:0,class:"text-yellow-400"},G={key:0,class:"mb-3"},$={class:"relative h-10 bg-gray-800 rounded-full overflow-hidden"},H={class:"absolute inset-0 flex items-center justify-between px-5 text-white font-bold text-lg"},U={class:"grid grid-cols-2 gap-4"},z={class:"team-container px-1"},Y={class:"team-header mb-2.5 pb-2 border-b-2 border-green-500/40"},q={class:"text-xl font-bold text-green-400 mb-1.5"},J={class:"flex justify-between"},Q={class:"text-center"},X={class:"text-green-400 font-bold text-lg"},Z={class:"text-center"},tt={class:"text-green-400 font-bold text-lg"},et={class:"text-center"},st={class:"text-green-400 font-bold text-lg"},it={class:"text-center"},ot={class:"text-green-400 font-bold text-lg"},at={class:"space-y-3"},nt={class:"flex items-center gap-2.5 mb-1.5"},dt=["src","alt"],lt={class:"flex-1 min-w-0"},rt={class:"flex items-baseline justify-between"},ct={class:"text-right ml-2"},xt={class:"text-primary font-bold text-base"},vt={class:"text-gray-500 text-xs"},ut={key:0,class:"flex items-center gap-1 text-sm mt-0.5 tracking-wider"},ht={class:"grid grid-cols-5 gap-2.5"},gt={class:"flex items-center gap-1"},mt={class:"text-white font-bold text-lg"},_t={class:"flex items-center gap-1"},ft={class:"text-white font-bold text-lg"},bt={class:"flex items-center gap-1"},wt={class:"text-white font-bold text-lg"},kt={class:"flex items-center gap-1"},Mt={class:"text-white font-bold text-lg"},pt={class:"flex items-center gap-1"},Rt={class:"text-white font-bold text-lg"},Nt={class:"team-container px-1"},St={class:"team-header mb-2.5 pb-2 border-b-2 border-red-500/40"},Tt={class:"text-xl font-bold text-red-400 mb-1.5"},yt={class:"flex justify-between"},Dt={class:"text-center"},Ct={class:"text-red-400 font-bold text-lg"},Vt={class:"text-center"},At={class:"text-red-400 font-bold text-lg"},Et={class:"text-center"},Ft={class:"text-red-400 font-bold text-lg"},Lt={class:"text-center"},Ot={class:"text-red-400 font-bold text-lg"},jt={class:"space-y-3"},It={class:"flex items-center gap-2.5 mb-1.5"},Pt=["src","alt"],Kt={class:"flex-1 min-w-0"},Wt={class:"flex items-baseline justify-between"},Bt={class:"text-right ml-2"},Gt={class:"text-primary font-bold text-base"},$t={class:"text-gray-500 text-xs"},Ht={key:0,class:"flex items-center gap-1 text-sm mt-0.5 tracking-wider"},Ut={class:"grid grid-cols-5 gap-2.5"},zt={class:"flex items-center gap-1"},Yt={class:"text-white font-bold text-lg"},qt={class:"flex items-center gap-1"},Jt={class:"text-white font-bold text-lg"},Qt={class:"flex items-center gap-1"},Xt={class:"text-white font-bold text-lg"},Zt={class:"flex items-center gap-1"},te={class:"text-white font-bold text-lg"},ee={class:"flex items-center gap-1"},se={class:"text-white font-bold text-lg"},ie=R({__name:"LiveMatchCard",setup(T){const r=S(),o=y(()=>r.currentMatch);function _(){return o.value?o.value.state==="READY"?"CONNECTING TO SERVER":o.value.status==="LIVE"&&o.value.playing!==!1?"LIVE MATCH":o.value.state==="ONGOING"?"ONGOING":"ACTIVE MATCH":""}function u(){var i,c,v;if(!o.value)return"";const f=(v=(c=(i=o.value.voting)==null?void 0:i.map)==null?void 0:c.pick)==null?void 0:v[0];return f?f.charAt(0).toUpperCase()+f.slice(1):""}return(f,i)=>{var c,v;return x(r).currentMatch?(a(),n("div",j,[t("div",I,[t("div",P,[i[0]||(i[0]=t("div",{class:"w-2 h-2 bg-red-500 rounded-full animate-pulse"},null,-1)),t("h2",K,s(_()),1),i[1]||(i[1]=t("div",{class:"w-2 h-2 bg-red-500 rounded-full animate-pulse"},null,-1))]),t("div",W,[t("span",null,s(((c=o.value.gameModeLabel)==null?void 0:c.en)||o.value.game||"5v5")+" • "+s(((v=o.value.entity)==null?void 0:v.name)||"Matchmaking"),1),u()?(a(),n("span",B," • "+s(u()),1)):l("",!0)]),i[2]||(i[2]=t("div",{class:"text-xs text-gray-400 mt-1"}," Цифры показывают отклонение от среднего по команде ",-1))]),o.value.winProbability?(a(),n("div",G,[t("div",$,[t("div",{class:"absolute left-0 top-0 h-full bg-gradient-to-r from-green-500 to-green-600 transition-all duration-1000",style:p({width:`${o.value.winProbability.team1}%`})},null,4),t("div",{class:"absolute right-0 top-0 h-full bg-gradient-to-l from-red-500 to-red-600 transition-all duration-1000",style:p({width:`${o.value.winProbability.team2}%`})},null,4),t("div",H,[t("span",null,s(o.value.teams.faction1.name)+" "+s(o.value.winProbability.team1)+"%",1),t("span",null,s(o.value.winProbability.team2)+"% "+s(o.value.teams.faction2.name),1)])])])):l("",!0),t("div",U,[t("div",z,[t("div",Y,[t("h3",q,s(o.value.teams.faction1.name),1),t("div",J,[t("div",Q,[t("div",X,s(Math.round(o.value.teams.faction1.avgStats.elo)),1),i[3]||(i[3]=t("div",{class:"text-gray-400 text-xs"},"ELO",-1))]),t("div",Z,[t("div",tt,s(o.value.teams.faction1.avgStats.kd.toFixed(2)),1),i[4]||(i[4]=t("div",{class:"text-gray-400 text-xs"},"K/D",-1))]),t("div",et,[t("div",st,s(Math.round(o.value.teams.faction1.avgStats.winRate))+"%",1),i[5]||(i[5]=t("div",{class:"text-gray-400 text-xs"},"WR",-1))]),t("div",it,[t("div",ot,s(Math.round(o.value.teams.faction1.avgStats.adr)),1),i[6]||(i[6]=t("div",{class:"text-gray-400 text-xs"},"ADR",-1))])])]),t("div",at,[(a(!0),n(w,null,k(o.value.teams.faction1.roster,e=>{var h,g,m;return a(),n("div",{key:e.id,class:d(["player-card bg-gray-800/40 rounded-xl p-3 transition-all",{"border-[3px] border-primary bg-gradient-to-r from-primary/20 to-primary/10 shadow-xl shadow-primary/50":e.id===((h=x(r).user)==null?void 0:h.id)}])},[t("div",nt,[t("img",{src:e.avatar,alt:e.nickname,class:d(["w-11 h-11 rounded-full border-2 transition-all",e.id===((g=x(r).user)==null?void 0:g.id)?"border-primary shadow-lg shadow-primary/50":"border-green-500/50"])},null,10,dt),t("div",lt,[t("div",rt,[t("div",{class:d(["font-bold text-lg truncate",e.id===((m=x(r).user)==null?void 0:m.id)?"text-primary":"text-white"])},s(e.nickname),3),t("div",ct,[t("div",xt,s(e.elo),1),t("div",vt,s(e.stats.matches)+" игр",1)])]),e.recentMatches?(a(),n("div",ut,[(a(!0),n(w,null,k(e.recentMatches.split(""),(b,M)=>(a(),n("span",{key:M,class:d([b==="W"?"text-green-400":"text-red-400","font-black"])},s(b),3))),128))])):l("",!0)])]),t("div",ht,[t("div",null,[i[7]||(i[7]=t("div",{class:"text-gray-400 text-xs mb-0.5"},"K/D",-1)),t("div",gt,[t("span",mt,s(e.stats.kd.toFixed(2)),1),e.deviation&&!isNaN(e.deviation.kd)&&Math.round(e.deviation.kd*10)!==0?(a(),n("span",{key:0,class:d([e.deviation.kd>=0?"text-green-400":"text-red-400","text-xs font-bold"])},s(e.deviation.kd>=0?"+":"")+s(e.deviation.kd.toFixed(1)),3)):l("",!0)])]),t("div",null,[i[8]||(i[8]=t("div",{class:"text-gray-400 text-xs mb-0.5"},"WR",-1)),t("div",_t,[t("span",ft,s(Math.round(e.stats.winRate))+"%",1),e.deviation&&Math.round(e.deviation.winRate)!==0?(a(),n("span",{key:0,class:d([e.deviation.winRate>=0?"text-green-400":"text-red-400","text-xs font-bold"])},s(e.deviation.winRate>=0?"+":"")+s(Math.round(e.deviation.winRate)),3)):l("",!0)])]),t("div",null,[i[9]||(i[9]=t("div",{class:"text-gray-400 text-xs mb-0.5"},"ADR",-1)),t("div",bt,[t("span",wt,s(Math.round(e.stats.adr)),1),e.deviation&&Math.round(e.deviation.adr)!==0?(a(),n("span",{key:0,class:d([e.deviation.adr>=0?"text-green-400":"text-red-400","text-xs font-bold"])},s(e.deviation.adr>=0?"+":"")+s(Math.round(e.deviation.adr)),3)):l("",!0)])]),t("div",null,[i[10]||(i[10]=t("div",{class:"text-gray-400 text-xs mb-0.5"},"HS%",-1)),t("div",kt,[t("span",Mt,s(Math.round(e.stats.headshots))+"%",1),e.deviation&&Math.round(e.deviation.headshots)!==0?(a(),n("span",{key:0,class:d([e.deviation.headshots>=0?"text-green-400":"text-red-400","text-xs font-bold"])},s(e.deviation.headshots>=0?"+":"")+s(Math.round(e.deviation.headshots)),3)):l("",!0)])]),t("div",null,[i[11]||(i[11]=t("div",{class:"text-gray-400 text-xs mb-0.5"},"KAST",-1)),t("div",pt,[t("span",Rt,s(Math.round(e.stats.kast))+"%",1),e.deviation&&Math.round(e.deviation.kast)!==0?(a(),n("span",{key:0,class:d([e.deviation.kast>=0?"text-green-400":"text-red-400","text-xs font-bold"])},s(e.deviation.kast>=0?"+":"")+s(Math.round(e.deviation.kast)),3)):l("",!0)])])])],2)}),128))])]),t("div",Nt,[t("div",St,[t("h3",Tt,s(o.value.teams.faction2.name),1),t("div",yt,[t("div",Dt,[t("div",Ct,s(Math.round(o.value.teams.faction2.avgStats.elo)),1),i[12]||(i[12]=t("div",{class:"text-gray-400 text-xs"},"ELO",-1))]),t("div",Vt,[t("div",At,s(o.value.teams.faction2.avgStats.kd.toFixed(2)),1),i[13]||(i[13]=t("div",{class:"text-gray-400 text-xs"},"K/D",-1))]),t("div",Et,[t("div",Ft,s(Math.round(o.value.teams.faction2.avgStats.winRate))+"%",1),i[14]||(i[14]=t("div",{class:"text-gray-400 text-xs"},"WR",-1))]),t("div",Lt,[t("div",Ot,s(Math.round(o.value.teams.faction2.avgStats.adr)),1),i[15]||(i[15]=t("div",{class:"text-gray-400 text-xs"},"ADR",-1))])])]),t("div",jt,[(a(!0),n(w,null,k(o.value.teams.faction2.roster,e=>{var h,g,m;return a(),n("div",{key:e.id,class:d(["player-card bg-gray-800/40 rounded-xl p-3 transition-all",{"border-[3px] border-primary bg-gradient-to-r from-primary/20 to-primary/10 shadow-xl shadow-primary/50":e.id===((h=x(r).user)==null?void 0:h.id)}])},[t("div",It,[t("img",{src:e.avatar,alt:e.nickname,class:d(["w-11 h-11 rounded-full border-2 transition-all",e.id===((g=x(r).user)==null?void 0:g.id)?"border-primary shadow-lg shadow-primary/50":"border-red-500/50"])},null,10,Pt),t("div",Kt,[t("div",Wt,[t("div",{class:d(["font-bold text-lg truncate",e.id===((m=x(r).user)==null?void 0:m.id)?"text-primary":"text-white"])},s(e.nickname),3),t("div",Bt,[t("div",Gt,s(e.elo),1),t("div",$t,s(e.stats.matches)+" игр",1)])]),e.recentMatches?(a(),n("div",Ht,[(a(!0),n(w,null,k(e.recentMatches.split(""),(b,M)=>(a(),n("span",{key:M,class:d([b==="W"?"text-green-400":"text-red-400","font-black"])},s(b),3))),128))])):l("",!0)])]),t("div",Ut,[t("div",null,[i[16]||(i[16]=t("div",{class:"text-gray-400 text-xs mb-0.5"},"K/D",-1)),t("div",zt,[t("span",Yt,s(e.stats.kd.toFixed(2)),1),e.deviation&&!isNaN(e.deviation.kd)&&Math.round(e.deviation.kd*10)!==0?(a(),n("span",{key:0,class:d([e.deviation.kd>=0?"text-green-400":"text-red-400","text-xs font-bold"])},s(e.deviation.kd>=0?"+":"")+s(e.deviation.kd.toFixed(1)),3)):l("",!0)])]),t("div",null,[i[17]||(i[17]=t("div",{class:"text-gray-400 text-xs mb-0.5"},"WR",-1)),t("div",qt,[t("span",Jt,s(Math.round(e.stats.winRate))+"%",1),e.deviation&&!isNaN(e.deviation.winRate)&&Math.round(e.deviation.winRate)!==0?(a(),n("span",{key:0,class:d([e.deviation.winRate>=0?"text-green-400":"text-red-400","text-xs font-bold"])},s(e.deviation.winRate>=0?"+":"")+s(Math.round(e.deviation.winRate)),3)):l("",!0)])]),t("div",null,[i[18]||(i[18]=t("div",{class:"text-gray-400 text-xs mb-0.5"},"ADR",-1)),t("div",Qt,[t("span",Xt,s(Math.round(e.stats.adr)),1),e.deviation&&!isNaN(e.deviation.adr)&&Math.round(e.deviation.adr)!==0?(a(),n("span",{key:0,class:d([e.deviation.adr>=0?"text-green-400":"text-red-400","text-xs font-bold"])},s(e.deviation.adr>=0?"+":"")+s(Math.round(e.deviation.adr)),3)):l("",!0)])]),t("div",null,[i[19]||(i[19]=t("div",{class:"text-gray-400 text-xs mb-0.5"},"HS%",-1)),t("div",Zt,[t("span",te,s(Math.round(e.stats.headshots))+"%",1),e.deviation&&!isNaN(e.deviation.headshots)&&Math.round(e.deviation.headshots)!==0?(a(),n("span",{key:0,class:d([e.deviation.headshots>=0?"text-green-400":"text-red-400","text-xs font-bold"])},s(e.deviation.headshots>=0?"+":"")+s(Math.round(e.deviation.headshots)),3)):l("",!0)])]),t("div",null,[i[20]||(i[20]=t("div",{class:"text-gray-400 text-xs mb-0.5"},"KAST",-1)),t("div",ee,[t("span",se,s(Math.round(e.stats.kast))+"%",1),e.deviation&&!isNaN(e.deviation.kast)&&Math.round(e.deviation.kast)!==0?(a(),n("span",{key:0,class:d([e.deviation.kast>=0?"text-green-400":"text-red-400","text-xs font-bold"])},s(e.deviation.kast>=0?"+":"")+s(Math.round(e.deviation.kast)),3)):l("",!0)])])])],2)}),128))])])])])):l("",!0)}}}),oe=N(ie,[["__scopeId","data-v-5b1c4685"]]),ae=R({__name:"LiveMatchView",setup(T){const r=S(),o=O(),_=D(!0),u=[];function f(){const c=o.settings.liveMatch.showDuration*1e3,v=o.settings.liveMatch.hideDuration*1e3;_.value=!0;async function e(){_.value=!1;const g=window.setTimeout(async()=>{await r.checkForOngoingMatch(),_.value=!0;const m=window.setTimeout(e,c);u.push(m)},v);u.push(g)}const h=window.setTimeout(e,c);u.push(h),console.log(`👁️ Visibility cycle: show ${c/1e3}s, hide ${v/1e3}s`),console.log("🔄 Match data will refresh before each show")}function i(){u.forEach(c=>clearTimeout(c)),u.length=0}return C(async()=>{o.loadFromUrl(),o.settings.nickname&&(await r.loadPlayer(o.settings.nickname),await r.checkForOngoingMatch(),f())}),V(()=>{i()}),(c,v)=>(a(),A(F,{name:"fade"},{default:E(()=>[_.value&&x(r).currentMatch&&!x(r).error&&!x(r).isLoading?(a(),n("div",{key:0,class:"live-match-container",style:p({opacity:x(o).settings.liveMatch.opacity/100})},[L(oe)],4)):l("",!0)]),_:1}))}}),re=N(ae,[["__scopeId","data-v-ede84088"]]);export{re as default};
